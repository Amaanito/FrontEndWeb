<!DOCTYPE html>

  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <div id="root"></div>

  
  <script type="text/babel">
    // Opret React-komponenter
    function ProductList({ products, addToCart }) {
      return (
        <ul>
          {products.map(product => (
            <li key={product.id}>
              {product.name} - {product.price} {product.currency}
              <button onClick={() => addToCart(product.id)}>Add to Cart</button>
            </li>
          ))}
        </ul>
      );
    }

    function CartItem({ item, removeFromCart }) {
      return (
        <li>
          {item.name} - {item.price} {item.currency} - Quantity: {item.quantity}
          <button onClick={() => removeFromCart(item.id)}>Remove</button>
        </li>
      );
    }

    function ShoppingCart({ cart, removeFromCart }) {
      return (
        <ul>
          {cart.map(item => (
            <CartItem key={item.id} item={item} removeFromCart={removeFromCart} />
          ))}
        </ul>
      );
    }

    function App() {
      const [products, setProducts] = React.useState([]);
      const [cart, setCart] = React.useState([]);
      const [totalPrice, setTotalPrice] = React.useState(0);

      React.useEffect(() => {
        fetch('items.json')
          .then(response => response.json())
          .then(data => setProducts(data))
          .catch(error => console.error('Error fetching data:', error));
      }, []);

      const addToCart = (productId) => {
        const product = products.find(item => item.id === productId);
        const cartItem = cart.find(item => item.id === productId);

        if (cartItem) {
          cartItem.quantity++;
          setCart([...cart]);
        } else {
          setCart([...cart, { ...product, quantity: 1 }]);
        }

        setTotalPrice(prevTotalPrice => prevTotalPrice + product.price);
      };

      const removeFromCart = (productId) => {
        const cartItem = cart.find(item => item.id === productId);
        if (cartItem) {
          cartItem.quantity--;
          if (cartItem.quantity === 0) {
            setCart(cart.filter(item => item.id !== productId));
          } else {
            setCart([...cart]);
          }
          setTotalPrice(prevTotalPrice => prevTotalPrice - cartItem.price);
        }
      };

      return (
        <div>
          <h1>Products</h1>
          <ProductList products={products} addToCart={addToCart} />

          <h2>Shopping Cart</h2>
          <ShoppingCart cart={cart} removeFromCart={removeFromCart} />

          <p>Total Price: <span>{totalPrice.toFixed(2)} DKK</span></p>
        </div>
      );
    }

    // Render App-komponenten i root-elementet
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
